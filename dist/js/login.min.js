"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var c=0;c<o.length;c++){var t=o[c];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,o,c){return o&&_defineProperties(e.prototype,o),c&&_defineProperties(e,c),Object.defineProperty(e,"prototype",{writable:!1}),e}var Login=function(){function e(){_classCallCheck(this,e),this.$login=$("#login"),this.$register=$("#register"),this.addEvent()}return _createClass(e,[{key:"addEvent",value:function(){var t=$("#cex"),n=$("#user"),r=$("#pwd"),s=!1,e=$(".span1"),o=$(".span2"),c=$(".bottom"),i=$(".qrCode");o.click(function(){$(this).css({color:"#000"}),e.css({color:"#999"}),c.hide(),i.css({display:"block"})}),e.click(function(){$(this).css({color:"#000"}),o.css({color:"#999"}),c.show(),i.css({display:"none"})}),n.blur(function(){s=!!/^\w{6,10}$/.test($(this).val())||(cocoMessage.error("请输入正确的账号",2e3),$(this).val(""),!1)}),r.blur(function(){if(!/^\w{8,12}$/.test($(this).val()))return cocoMessage.error("请输入正确的密码",2e3),$(this).val(""),s=!1;s=!0}),$(function(){code_draw(),$("#canvas").on("click",function(){code_draw()}),$("#input-val").on("blur",function(){var e=$(this).val().toLowerCase(),o=$("#canvas").attr("data-code");""==e?cocoMessage.error("请输入验证码！",2e3):s=e==o||(cocoMessage.error("验证码错误，请重新输入",2e3),$(this).val(""),!1)})}),this.$login.hover(function(){$(this).css({backgroundColor:"#3058DF"})},function(){$(this).css({backgroundColor:"#387AFF"})}),this.$login.click(function(){var o,c;s?(o=n.val(),c=r.val(),$.post("../api/php/query.php",{uname:"".concat(o)},function(e){"null"==e?cocoMessage.error("无此用户名，请注册",0):$.post("../api/php/login.php",{uname:"".concat(o),pwd:"".concat(c)},function(e){"null"==e?cocoMessage.error("密码错误",2e3):((e=document.createElement("div")).innerText="登录成功！",cocoMessage.success(e),t.is(":checked")?$.cookie("免",o,{expires:7,path:"/"}):(n.val(""),r.val(""),$("#input-val").val(""),$.cookie("免",o,{path:"/"})),location.href="../html/list.html")})})):cocoMessage.error("请填写正确信息",2e3)}),this.$register.click(function(){location.href="register.html"})}}]),e}();new Login;